<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Adventure Book: Diary Edition</title>
    <!-- Chosen Palette: Cozy Diary (Paper White, Soft Pink, Muted Teal, Charcoal Text) -->
    <!-- Application Structure Plan: A complete redesign into a personal diary format. The layout is a single, scrollable diary page. A fixed sidebar on the left contains all planning tools (filters, map, guides) styled as planner tabs. The main content area on the right displays date ideas as diary entries with "taped-on" polaroids. This design enhances personalization and provides a clear, spacious layout. -->
    <!-- Visualization & Content Choices:
    - Report Info: Date ideas and country guides.
    - Goal: To create an intimate, personalized, and easy-to-navigate digital diary of date plans.
    - Viz/Presentation Method: Date ideas are styled as diary entries. Filters are in a fixed sidebar with tabs. The modal is a "zoomed-in" diary entry.
    - Interaction: The sidebar is interactive and fixed, while the main content scrolls. This is a standard, highly usable web pattern that avoids the "cramped" feeling.
    - Justification: This design directly addresses the user's request for a "diary" look while improving usability with a more conventional and spacious layout.
    - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f4f1ea; /* Soft beige background */
            color: #333;
        }
        .handwriting {
            font-family: 'Gaegu', cursive;
        }
        
        #app-content {
            opacity: 0;
            transition: opacity 0.5s ease-in;
            visibility: hidden;
        }
        #app-content.unlocked {
            opacity: 1;
            visibility: visible;
        }

        .diary-entry {
            background: #fff;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: fadeIn 0.5s ease-out forwards;
            opacity: 0;
            border: 1px solid #eee;
        }
        
        .polaroid {
            background: white;
            padding: 0.75rem;
            padding-bottom: 2.5rem;
            border-radius: 0.25rem;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            position: relative;
            transform: rotate(-3deg);
            transition: transform 0.2s ease;
        }
        .diary-entry:hover .polaroid {
            transform: rotate(2deg) scale(1.05);
        }
        .polaroid-image {
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            height: 100px;
        }
        .polaroid-caption {
            position: absolute;
            bottom: 0.5rem;
            left: 0.75rem;
            right: 0.75rem;
            text-align: center;
            font-size: 0.9rem;
        }

        #modal {
            transition: opacity 0.3s ease-in-out;
        }
        #modal-content {
            background-image: url('https://www.transparenttextures.com/patterns/lined-paper.png');
            background-color: #fffaf0;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        #entry-screen {
            position: fixed;
            inset: 0;
            background-color: #f4f1ea;
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        #entry-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .animation-container {
            text-align: center;
        }
        .anim-text {
            font-size: 2rem;
            transition: opacity 0.5s ease-in-out;
            opacity: 0;
            min-height: 3rem;
        }
        .anim-icon {
            font-size: 3rem;
            display: inline-block;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s;
            transform: scale(0);
            opacity: 0;
        }
        .anim-text.visible, .anim-icon.visible {
            opacity: 1;
            transform: scale(1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-btn {
            padding: 0.75rem;
            border-left: 4px solid transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }
        .tab-btn:hover {
            background-color: #e9e5de;
        }
        .tab-btn.active {
            border-left-color: #f08080;
            background-color: #e9e5de;
            font-weight: bold;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        .interest-label {
            transition: all 0.2s ease-in-out;
        }
        .interest-checkbox:checked + label {
            background-color: #fde2e4;
            border-color: #f08080;
            transform: scale(1.05);
        }
        
        .falling-leaf {
            position: fixed;
            top: -10%;
            width: 20px;
            height: 20px;
            background-color: #ffb3ba;
            border-radius: 10% 50%;
            animation: fall 15s infinite linear;
            z-index: 1;
            pointer-events: none;
        }
        @keyframes fall {
            to {
                transform: translateY(110vh) rotate(360deg);
            }
        }
        
        .password-box {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            pointer-events: none;
        }
        .password-box.visible {
            opacity: 1;
            pointer-events: all;
        }
        .password-input.error {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

    </style>
</head>
<body class="antialiased">

    <div id="entry-screen">
        <div class="animation-container mb-8">
            <p id="anim-text" class="anim-text handwriting"></p>
            <div class="mt-4 space-x-4">
                <span id="anim-icon-1" class="anim-icon"></span>
                <span id="anim-icon-2" class="anim-icon"></span>
                <span id="anim-icon-3" class="anim-icon"></span>
                <span id="anim-icon-4" class="anim-icon"></span>
            </div>
        </div>
        <div id="password-box" class="password-box">
            <h2 class="text-3xl handwriting text-gray-700 mb-4">Our Secret Diary</h2>
            <p class="text-gray-500 mb-4">What's the secret password?</p>
            <form id="password-form">
                <input type="password" id="password-input" class="password-input w-full p-2 border border-gray-300 rounded-lg text-center" autofocus>
                <button type="submit" class="w-full mt-4 text-white font-bold py-2 px-4 rounded-lg bg-pink-400 hover:bg-pink-500 transition-all">Unlock</button>
            </form>
        </div>
    </div>

    <div id="app-content">
        <header class="p-4 text-center mb-8">
            <h1 class="text-5xl md:text-6xl font-bold text-gray-800 handwriting">Our Adventure Book</h1>
            <p class="text-xl text-pink-400">My little book of plans for you and me!</p>
        </header>

        <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-12 lg:gap-8">
            <!-- Sidebar -->
            <aside class="lg:col-span-4 xl:col-span-3">
                <div class="lg:sticky lg:top-8 space-y-6 bg-white/50 p-4 rounded-xl shadow-lg">
                    <div class="flex justify-around items-center border-b pb-4">
                        <div id="gaming-console" class="cursor-pointer text-5xl hover:scale-110 transition-transform" title="Gaming Dates">🎮</div>
                        <div id="mug" class="cursor-pointer text-5xl hover:scale-110 transition-transform" title="Cozy Dates">☕</div>
                        <div id="reset-filters-btn" class="cursor-pointer text-4xl hover:scale-110 transition-transform" title="Start Over">🔄</div>
                    </div>

                    <!-- Tabs -->
                    <div class="space-y-2">
                        <button class="tab-btn active handwriting text-2xl w-full" data-tab="tab-plan">Let's Plan!</button>
                        <button class="tab-btn handwriting text-2xl w-full" data-tab="tab-guides">My Travel Notes</button>
                    </div>

                    <div id="tab-plan" class="tab-content active space-y-4">
                        <div>
                            <input type="text" id="country-search" placeholder="Search for a country..." class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <button id="recommended-btn" class="w-full text-white font-bold py-2 px-4 rounded-lg bg-pink-400 hover:bg-pink-500 transition-all">⭐ Just For Us</button>
                        </div>
                        <div>
                            <h3 class="font-bold handwriting text-xl mb-2">What's our vibe?</h3>
                            <div id="interest-filter" class="flex flex-wrap gap-2 text-sm max-h-48 overflow-y-auto">
                            </div>
                        </div>
                    </div>

                    <div id="tab-guides" class="tab-content">
                         <h2 class="text-2xl font-bold text-gray-700 handwriting mb-2">My Travel Notes</h2>
                         <div id="country-guides-content" class="space-y-4 text-sm text-gray-600 max-h-[50vh] overflow-y-auto pr-2">
                         </div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="lg:col-span-8 xl:col-span-9 mt-8 lg:mt-0">
                <p id="results-count" class="text-center md:text-left mb-4 text-gray-700 font-semibold"></p>
                <section id="date-ideas-grid" class="space-y-8">
                </section>
            </main>
        </div>

        <div id="modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
            <div id="modal-content">
                <div class="p-6">
                    <h2 id="modal-title" class="text-4xl font-bold text-gray-700 handwriting text-center mb-4"></h2>
                    <div class="mt-4 space-y-4 text-base">
                        <div>
                            <h3 class="font-bold text-pink-500 handwriting text-2xl">So, what's the vibe?</h3>
                            <p id="modal-vibe" class="text-gray-600"></p>
                        </div>
                        <div>
                            <h3 class="font-bold text-pink-500 handwriting text-2xl">Here's the plan...</h3>
                            <p id="modal-experience" class="text-gray-600 whitespace-pre-wrap"></p>
                        </div>
                        <div>
                            <h3 class="font-bold text-pink-500 handwriting text-2xl">My secret tip for us! 💡</h3>
                            <p id="modal-tip" class="text-gray-600"></p>
                        </div>
                    </div>
                </div>
                 <button id="close-modal" class="absolute -top-4 -right-4 text-3xl font-bold text-white bg-pink-400 rounded-full h-10 w-10 flex items-center justify-center shadow-lg hover:bg-pink-500 transition">&times;</button>
            </div>
        </div>
    </div>

    <script>
        const dateIdeas = [
            { id: 1, country: "England", title: "London's Cat Cafés", interests: ["Cats", "Cafes", "Cute Animals", "Meals"], emoji: "🐱", topPick: true, vibe: "Just imagine us, escaping the busy city for a bit to relax and cuddle with some adorable cats. We could go somewhere charitable and sweet, or make it a super fancy afternoon treat.", experience: "London has so many cute cat cafes! We could go to Java Whiskers, which is basically a foster home for rescue cats (so sweet!). Or, if we're feeling fancy, Whiskers & Cream does a full afternoon tea with the kitties. There's also Kitty Cafe in a few other cities if we're traveling around.", tip: "These places are super popular, so I should definitely book a spot for us online beforehand, especially if we go on a weekend!" },
            { id: 2, country: "England", title: "Geek Culture Pilgrimage", interests: ["Anime", "Manga", "Video Games", "Shopping", "Board Games"], emoji: "🎮", topPick: true, vibe: "A super exciting day diving into all our favorite geeky things! We can browse for manga and figures, then end the day with some fun competition.", experience: "My plan is to start in Camden Town to check out Japan Craft and Camden Anime. Then, we absolutely have to go to the giant Forbidden Planet store! For the evening, we can either play modern games at Platform, hit up the retro NQ64 arcade in Soho, or get cozy with a massive library of board games at Draughts.", tip: "I saw that some of the board game cafes, like Otter Chaos, have special D&D nights. That could be a really fun way to meet other nerdy people!" },
            { id: 3, country: "England", title: "A Walk Through History", interests: ["History", "Museums"], emoji: "🏛️", topPick: true, vibe: "A really thoughtful and interesting day, exploring the history of the World Wars. We can see everything from huge tanks to the secret bunkers where big decisions were made.", experience: "For World War I, the Imperial War Museum in London is a must-see. For World War II, I think the Churchill War Rooms would be so atmospheric and cool to see. If we're feeling adventurous, we could even take a day trip to The Tank Museum to see all the historic military gear.", tip: "If we plan on visiting a few of the Imperial War Museums, getting a membership could save us some money in the long run." },
            { id: 4, country: "England", title: "Journey to the Stars", interests: ["Sci-fi", "Space", "Museums"], emoji: "🚀", topPick: true, vibe: "A day to feel totally inspired and think about the future! We can go from looking at cool old inventions to dreaming about the vastness of space.", experience: "The Science Museum in London has amazing free galleries about space. But for the ultimate date, I think we should take a day trip to the National Space Centre in Leicester. It has the UK's biggest planetarium and real rockets!", tip: "I checked their website, and the National Space Centre sometimes has sci-fi themed nights! We should look at their calendar before we plan our trip." },
            { id: 5, country: "England", title: "Penguin Parade", interests: ["Penguins", "Cute Animals", "Parks", "Cold"], emoji: "🐧", topPick: true, vibe: "An absolutely adorable day just hanging out with the cutest, most dapper birds in the world. My heart will probably melt.", experience: "London Zoo has a huge penguin exhibit called Penguin Beach where we can watch them swim underwater. Or, if we go to the Cotswolds, Birdland Park has the only King Penguins in England! They're so majestic.", tip: "I read something super cute on the London Zoo's website. It said, 'Some penguins are gay. Get over it.' I love that, it feels like such a welcoming place for us." },
            { id: 27, country: "England", title: "Royal Park Picnic", interests: ["Picnics", "Parks", "Flowers", "Nature"], emoji: "🧺", topPick: true, vibe: "A classic, super romantic day. We can just relax in one of London's huge, beautiful parks with a basket full of our favorite snacks.", experience: "My plan is to go to a nice supermarket like M&S or Waitrose and get some fancy sandwiches and snacks, maybe even a little bottle of bubbly. Then we can find a perfect spot in Hyde Park, or maybe St. James's Park for an amazing view of Buckingham Palace.", tip: "For the absolute best view, I think we should go to Primrose Hill. It has a stunning panorama of the whole London skyline, which would be perfect for a sunset picnic." },
            { id: 6, country: "Japan", title: "Akihabara Immersion", interests: ["Anime", "Manga", "Video Games", "Cafes", "Shopping"], emoji: "🕹️", topPick: true, vibe: "The ultimate pilgrimage for us! A whole day in the electric, buzzing heart of otaku culture. So much to see and do!", experience: "We'll spend the whole day exploring Akihabara. We can check out famous buildings like Radio Kaikan and Mandarake for figures, then hit up Super Potato for retro games. We definitely have to experience a Maid Cafe, and then finish the day at a legendary arcade like Taito HEY.", tip: "I read that we should try to go on a Sunday. They close the main street to cars, so it becomes a 'pedestrian paradise' and is much easier to walk around." },
            { id: 7, country: "Japan", title: "The Ghibli Dream", interests: ["Anime", "Parks", "Nature"], emoji: "🌳", topPick: true, vibe: "A truly magical and whimsical day where we can step right into our favorite Ghibli movies. It will be so enchanting!", experience: "We have two choices! We can try to get tickets for the Ghibli Museum in Tokyo, which is super intimate and has exclusive short films. Or, we could go to the huge Ghibli Park near Nagoya and walk through life-sized sets from the movies, like Satsuki and Mei's house!", tip: "Getting tickets for either of these is super hard! They go on sale on the 10th of each month and sell out in minutes. We'll have to be ready to book them instantly." },
            { id: 8, country: "Japan", title: "Enoshima & Kamakura", interests: ["Seaside", "Nature", "Fish", "Dragons", "History"], emoji: "🐉", topPick: true, vibe: "A refreshing day trip out of Tokyo to the coast. We can get some fresh sea air, see some beautiful old shrines, and even find a dragon!", experience: "We'll go to Enoshima Island first, which is connected to the mainland by a bridge. It's home to a shrine for a goddess who tamed a five-headed dragon! Then we can take the cute Enoden train along the coast to Kamakura to see the Great Buddha.", tip: "To really lean into the theme, we have to find the Wadatsumi no Miya Shrine on the island. It's dedicated to the dragon deity itself!" },
            { id: 28, country: "Japan", title: "Sakura Picnic", interests: ["Picnics", "Parks", "Flowers", "Nature"], emoji: "🌸", topPick: true, vibe: "This is the dream date! Just us, sitting under a cloud of pink cherry blossoms with a cute picnic. It's the most romantic thing I can imagine.", experience: "If we're there in the spring, we have to do a hanami (flower viewing) picnic. We could go to a famous spot like Ueno Park, or try to find a quieter spot like Inokashira Park. We can just grab a bento box and some drinks from a convenience store and find the perfect tree.", tip: "I've heard you have to get there really early to get a good spot, especially on weekends. People use blue tarps to save their space, so we should get one too!" },
            { id: 9, country: "South Korea", title: "Manhwa & Webtoon Cafes", interests: ["Manga", "Cafes", "Meals"], emoji: "📖", topPick: true, vibe: "The coziest date ever. We can find our own little private den, surround ourselves with pillows and comics, and just relax for hours.", experience: "These cafes are amazing! We pay for a block of time, and we get our own little cubicle. We can read, snack on ramen that they deliver right to us, and even take a nap. The Nolsoop chain is really popular and some are open 24/7!", tip: "A lot of the cubicles have power outlets, so it would be the perfect place to recharge our phones and ourselves after a long day of walking around." },
            { id: 10, country: "South Korea", title: "PC Bang Experience", interests: ["Video Games", "Meals"], emoji: "🖥️", topPick: true, vibe: "A super fun, high-energy night diving into Korea's amazing gaming culture. We can play games for hours and have delicious food brought right to our desks.", experience: "PC bangs are everywhere and they're open 24/7! They have the best computers and super-fast internet. We can play all our favorite games and order everything from instant noodles to full meals right from our seats. It's the perfect gaming date night.", tip: "It can be hard to find two seats together when it's busy. The trick is to find our spots first, leave a jacket to save them, and then go pay for our time." },
            { id: 11, country: "South Korea", title: "Ethical Animal Adventure", interests: ["Cute Animals", "Foxes", "Nature", "Cafes"], emoji: "🦊", topPick: true, vibe: "A super cute day hanging out with all kinds of animals, but in places that really take good care of them.", experience: "Seoul has some great animal cafes! We have to go to the Thanks Nature Cafe to see the two fluffy sheep. There are also lots of dog and cat cafes. For something really unique, Meerkat Friends has meerkats, a wallaby, and even an Arctic fox!", tip: "A lot of the best animal cafes are in the Hongdae area, so we could probably visit more than one in an afternoon if we wanted to!" },
            { id: 29, country: "South Korea", title: "Han River Picnic", interests: ["Picnics", "Parks", "Seaside", "Meals"], emoji: "🧺", topPick: true, vibe: "The perfect Seoul date night. We can have a picnic by the river and watch the city lights come on. It's so romantic.", experience: "We'll go to one of the big parks along the Han River, like Yeouido. We can rent a picnic mat and then order fried chicken and beer ('chimaek') to be delivered right to our spot on the grass! Or we can get instant ramen from a convenience store and use their cool self-cooking machines.", tip: "After our picnic, we could take an evening river cruise to see all the bridges lit up. That would be so beautiful." },
            { id: 12, country: "France", title: "The Art of the Pâtisserie", interests: ["Cafes", "Meals"], emoji: "🥐", vibe: "A super indulgent and delicious day. We'll just wander around Paris, eating the most beautiful and tasty pastries in the world.", experience: "We can make our own little pastry tour! We have to visit Stohrer, the oldest bakery in Paris. Then we can try the famous macarons from Pierre Hermé or Ladurée. I also really want to try the amazing eclairs from Yann Couvreur.", tip: "While the famous places are a must, I bet we'll find our own favorite little neighborhood bakery just by following our noses. Discovering our own perfect croissant sounds so romantic." },
            { id: 13, country: "France", title: "Paris's Libraries", interests: ["Library Dates", "History"], emoji: "📚", topPick: true, vibe: "A quiet, beautiful, and awe-inspiring date. We can just soak in the atmosphere of these incredible old libraries. It will feel like we're in a movie.", experience: "Paris has some of the most stunning libraries. We should visit the Bibliothèque Sainte-Geneviève with its amazing iron arches. The Salle Ovale at the Bibliothèque Nationale is also supposed to be breathtaking. It'll be so nice to just be quiet together in such a beautiful, historic place.", tip: "We have to remember that these are real, working libraries, so we'll have to be super quiet and respectful. It's all about the atmosphere." },
            { id: 14, country: "France", title: "A Date in Le Marais", interests: ["Cafes", "Shopping", "History"], emoji: "🏳️‍🌈", vibe: "A fun, stylish, and super welcoming day in the heart of gay Paris. We can shop, eat, and just enjoy being in such a beautiful and accepting neighborhood.", experience: "We'll spend the whole day exploring Le Marais. We can browse all the cool boutiques, grab a snack from the famous Legaychoc bakery, and then relax in the beautiful Place des Vosges. There are also lots of queer-friendly bars and bookstores to check out.", tip: "The main area is around Rue Sainte-Croix de la Bretonnerie. That's where we'll find most of the gay bars and shops." },
            { id: 30, country: "France", title: "Eiffel Tower Picnic", interests: ["Picnics", "Parks", "Nature"], emoji: "🧺", topPick: true, vibe: "The most iconic, romantic picnic ever. Just you, me, a baguette, some cheese, and the Eiffel Tower sparkling in front of us.", experience: "This is a non-negotiable date! We'll go to a cheese shop, a bakery, and a supermarket for some wine. Then we'll find the perfect spot on the grass of the Champ de Mars. We have to time it so we're there in the evening to see the tower light up and sparkle on the hour.", tip: "I heard that for a slightly different view with fewer people, we could have our picnic across the river at the Jardins du Trocadéro." },
            { id: 15, country: "Norway", title: "Oslofjord Experience", interests: ["Seaside", "Nature", "Cold"], emoji: "🧖", topPick: true, vibe: "The perfect mix of a refreshing nature adventure and a cozy, warm experience. We can explore the islands and then get warm in a sauna!", experience: "We can use the public ferry in Oslo to hop between the little islands in the fjord. We can pack a picnic and just enjoy being out on the water. Afterwards, we have to try one of the floating saunas right on the harbor. We can get all warm and then take a quick, chilly dip in the fjord!", tip: "The ferry times change depending on the season, so I'll have to check the Ruter app to plan our island hopping route." },
            { id: 16, country: "Norway", title: "Chasing the Aurora", interests: ["Cold", "Nature", "Space"], emoji: "🌌", topPick: true, vibe: "A completely magical, once-in-a-lifetime date. We'll go on an adventure into the Arctic night to see the Northern Lights together.", experience: "To see the aurora, we have to go to Northern Norway, probably Tromsø. We'll book a guided tour that will take us away from the city lights to find the best view. A lot of the tours give you warm suits and hot drinks, and some even have a campfire.", tip: "This is a super popular trip, so I'll need to book our flights, hotel, and the aurora tour months in advance, especially if we go in the winter." },
            { id: 17, country: "Norway", title: "Ethical Fox Sighting", interests: ["Foxes", "Cute Animals", "Nature", "Cold"], emoji: "🦊", topPick: true, vibe: "A really special and ethical way for us to see my favorite animal. We can see beautiful Arctic foxes in a place that really cares for them.", experience: "We should visit Polar Park, which is near Tromsø. It's the world's northernmost animal park, and they have Arctic foxes in a big, natural enclosure. It's so much better than those sad fox villages.", tip: "For a real splurge, we could book the 'Fox Encounter' and actually go inside the enclosure with a guide. That would be an absolute dream come true." },
            { id: 18, country: "Sweden", title: "Fika & Old Town Charm", interests: ["Cafes", "Meals", "History", "Shopping"], emoji: "☕", vibe: "A super cozy and historic day. We can wander the old cobblestone streets and then have a traditional Swedish 'fika' break.", experience: "We'll explore Gamla Stan, Stockholm's Old Town, and then find a cute cafe to have fika, which is basically a relaxing coffee and pastry break. We can try a classic cinnamon bun, a 'kanelbulle', and just soak in the cozy atmosphere.", tip: "I've heard Gamla Stan can be a bit touristy. For a more local vibe, we could check out the Södermalm district, which is known for its trendy cafes." },
            { id: 19, country: "Sweden", title: "Gaming & Geek Culture", interests: ["Video Games", "Board Games", "Sci-fi", "Shopping"], emoji: "👾", topPick: true, vibe: "A fun and playful day exploring Stockholm's geek scene. We can shop for books and games, and then have a competitive game night.", experience: "First, we have to go to the Science Fiction Bokhandeln, which is a legendary bookstore for all things sci-fi and fantasy. Then we can either go to a huge gaming center like Inferno Online or a cozy board game cafe like Alphaspel.", tip: "We should check the schedules for the board game cafes. They often have special game nights or tournaments that could be fun to join." },
            { id: 20, country: "Sweden", title: "Archipelago Adventure", interests: ["Seaside", "Nature", "Fish"], emoji: "⛵", vibe: "A beautiful and refreshing escape from the city. We can explore some of the thousands of islands in the Stockholm Archipelago.", experience: "We can take a public ferry from Stockholm to one of the nearby islands, like Vaxholm. We can explore the cute little villages, maybe go for a swim, and just enjoy the peaceful scenery. A picnic on the rocks by the sea sounds perfect.", tip: "For a really special date, we could even rent a kayak to explore the islands on our own." },
            { id: 21, country: "Sweden", title: "Winter in Stockholm", interests: ["Cold", "Snow", "Museums", "Cafes"], emoji: "❄️", topPick: true, vibe: "Embracing the cozy magic of a Swedish winter. We can go ice skating and then warm up in a cool museum.", experience: "If we're there in the winter, we have to go ice skating at the outdoor rink in Kungsträdgården park. Afterwards, we can warm up by visiting the Vasa Museum, which has an almost fully intact 17th-century ship!", tip: "If we go in December, we can experience a traditional Swedish Christmas market at the Skansen open-air museum. It would be so festive and cute." },
            { id: 22, country: "Ireland", title: "Dublin's Literary Pub Crawl", interests: ["Library Dates", "History", "Meals"], emoji: "🍺", topPick: true, vibe: "A really fun and smart night out. We can learn about Ireland's famous writers while visiting the historic pubs they used to hang out in.", experience: "We can join the Dublin Literary Pub Crawl. Actors lead the tour and perform scenes from famous works. It's like a show, a history lesson, and a pub tour all in one!", tip: "This is super popular, so I should definitely book our tickets online before we go to make sure we get a spot." },
            { id: 23, country: "Ireland", title: "Geek & Gaming Dublin", interests: ["Video Games", "Board Games", "Shopping"], emoji: "🎲", topPick: true, vibe: "A day dedicated to exploring all the geeky spots in Dublin. We can shop for comics and then have a fun game night.", experience: "We'll start at Forbidden Planet for comics and manga. Then we can go to The R.A.G.E. for some retro arcade games. For a cozy evening, we can go to The Clockwork Door, which is a 'time house' where you pay for the time you spend and get unlimited games and tea.", tip: "The Clockwork Door sounds really cool. It's run on an honesty system and is a sober-friendly space, which is a nice alternative to a pub." },
            { id: 24, country: "Ireland", title: "Cliffs of Moher & Coastal Scenery", interests: ["Seaside", "Nature", "Cold"], emoji: "🌊", topPick: true, vibe: "An absolutely epic and dramatic day trip to see one of Ireland's most famous natural wonders. The views will be breathtaking.", experience: "We can take a day tour from Dublin to the Cliffs of Moher. They're huge cliffs right on the Atlantic coast. Most tours also stop at other cool places along the way, like the city of Galway.", tip: "I've heard the weather at the cliffs can change in a second, so we'll need to wear layers and bring a waterproof jacket, even if it's sunny in Dublin." },
            { id: 25, country: "Ireland", title: "A Date with Dublin's Penguins", interests: ["Penguins", "Cute Animals", "Parks"], emoji: "🐧", topPick: true, vibe: "An adorable day at one of Europe's oldest zoos, hanging out with some cute penguins.", experience: "We can go to the Dublin Zoo, which is in the huge Phoenix Park. They have a colony of Humboldt penguins that we can watch swim around. The zoo is also a charity, which is really nice.", tip: "After we see the penguins, we can walk around Phoenix Park and try to spot the famous herd of wild deer that live there." },
            { id: 26, country: "Ireland", title: "Howth Cliff Walk & Seafood", interests: ["Seaside", "Nature", "Fish", "Meals"], emoji: "🐟", vibe: "A refreshing coastal walk with amazing views, followed by some delicious fresh seafood. The perfect combination.", experience: "We can take a short train ride from Dublin to the fishing village of Howth. From there, we can do the Howth Cliff Walk. After our hike, we can reward ourselves with some classic fish and chips from a famous spot like Beshoff Bros right on the harbor.", tip: "There are a few different trails for the cliff walk, so we can pick one that suits how energetic we're feeling." }
        ];

        const countryGuides = {
            "England": {
                vibe: "Okay, so for England, I'm thinking we can get the best of both worlds! We can feel all historic and grand one day, and then dive into a super cool arcade the next. London will be our main playground.",
                lgbtq: "And don't worry, it's super friendly for us. The UK has strong legal protections, and places like London and Brighton are amazing, so we can just be ourselves.",
                tip: "We should definitely check out a board game cafe in London for a cozy, rainy afternoon date! It would be so cute.",
                bestTime: "Spring (April-May) would be lovely with all the parks in bloom, or Autumn (Sept-Oct) when it's a bit quieter.",
                souvenir: "We could get a unique board game from Draughts or a rare manga from Forbidden Planet to remember our trip!",
                language: { hello: "Hello!", thankYou: "Thank you!", cute: "That's cute!" }
            },
            "France": {
                vibe: "Paris is all about classic romance! I'm picturing us eating so many pastries, wandering through beautiful museums, and having a perfect picnic right by the Eiffel Tower.",
                lgbtq: "It's really good for us, especially in Paris. The Marais district is the historic gay neighborhood, and it's full of cute cafes, shops, and bars where we can feel totally comfortable.",
                tip: "We have to go to the Legaychoc bakery in the Marais – I heard they have some very cheeky and funny pastries!",
                bestTime: "Spring (April-June) or Fall (Sept-Oct) would be perfect to avoid the super hot summer and the biggest crowds.",
                souvenir: "We could get a beautiful box of macarons from Ladurée, or maybe a vintage book from one of the stalls along the Seine.",
                language: { hello: "Bonjour!", thankYou: "Merci!", cute: "C'est mignon!" }
            },
            "Ireland": {
                vibe: "I'm thinking cozy pubs, dramatic green cliffs, and lots of history and stories. It seems perfect for taking beautiful, long walks and then warming up in a friendly pub.",
                lgbtq: "It's super welcoming! Ireland was the first country to legalize same-sex marriage by a popular vote, which is amazing. Dublin has a really friendly and visible LGBTQ+ scene.",
                tip: "The Dublin Literary Pub Crawl sounds perfect for us – it's a mix of history and a fun night out!",
                bestTime: "Summer (June-August) would give us the best chance for good weather to explore all the beautiful cliffs and coastline.",
                souvenir: "A cool graphic novel from Forbidden Planet in Dublin, or maybe a super cozy Aran wool sweater.",
                language: { hello: "Dia dhuit! (dee-ah gwit)", thankYou: "Go raibh maith agat! (guh rev mah ag-ut)", cute: "Tá sé gleoite! (taw shay glyoh-tcha)" }
            },
            "Japan": {
                vibe: "This is the ultimate dream trip for us! We can go from the crazy electric energy of Akihabara to the peaceful magic of a Ghibli forest. So much anime, manga, and gaming to enjoy!",
                lgbtq: "This one is a bit more complicated. It's generally safe, especially in big cities like Tokyo, but it's more conservative. We'll just have to be a bit more mindful about being super affectionate in public, which is common for everyone there.",
                tip: "We absolutely have to plan our trip around getting tickets for the Ghibli Museum or Park. I know it's hard, but it will be so worth it!",
                bestTime: "Spring for the cherry blossoms would be a dream, or Autumn for the beautiful fall colors.",
                souvenir: "We have to get an exclusive figure from Akihabara or some Ghibli merch that you can only buy at the museum or park!",
                language: { hello: "Konnichiwa!", thankYou: "Arigatou gozaimasu!", cute: "Kawaii!" }
            },
            "Norway": {
                vibe: "This will be an epic nature adventure! We can chase the Northern Lights, see real arctic foxes, and then warm up in a floating sauna. It's all about embracing the beautiful, cold outdoors.",
                lgbtq: "It's excellent for us! Norway is one of the most LGBTQ+ friendly countries in the world, so we can feel totally safe and welcome everywhere we go.",
                tip: "The ethical fox encounter at Polar Park is a must-do for me. It's a much kinder way to see them than those sad fox villages.",
                bestTime: "Winter (Nov-March) is the best time to see the Northern Lights and enjoy all the snow.",
                souvenir: "We could get matching warm Norwegian sweaters, or maybe a little troll figurine for good luck.",
                language: { hello: "Hei!", thankYou: "Takk!", cute: "Så søt!" }
            },
            "South Korea": {
                vibe: "I'm imagining a whirlwind of futuristic city life, super cute cafes, and the best gaming culture. We could spend hours in a PC Bang or just chilling in a cozy Manhwa cafe.",
                lgbtq: "It's getting better, but still a bit conservative. It's safe, especially in the younger areas of Seoul like Hongdae, but we'll just be a little more low-key with our affection in public.",
                tip: "We should plan a full day of just cafe hopping in Hongdae and definitely end up at the Thanks Nature Sheep Cafe!",
                bestTime: "Spring for the cherry blossoms or Autumn for the crisp, cool air would be perfect.",
                souvenir: "We have to stock up on skincare products in Myeong-dong, and maybe get some cute character socks!",
                language: { hello: "Annyeonghaseyo!", thankYou: "Kamsahamnida!", cute: "Gwiyeowo!" }
            },
            "Sweden": {
                vibe: "I think Sweden will be so stylish and cozy. We can explore the historic old town and then have a 'fika', which is their special coffee and pastry break. It sounds so relaxing.",
                lgbtq: "It's excellent, just like Norway! Sweden is a world leader in LGBTQ+ rights, so we can be completely comfortable and ourselves.",
                tip: "A 'fika' date is a must. It's a whole tradition, not just a coffee break. It's the perfect way to relax after a day of exploring.",
                bestTime: "Summer would be amazing for the long, sunny days, perfect for exploring all the little islands around Stockholm.",
                souvenir: "A cool sci-fi book from their famous bookstore, or maybe a classic little Dala horse figurine.",
                language: { hello: "Hej!", thankYou: "Tack!", cute: "Söt!" }
            }
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            const appContent = document.getElementById('app-content');
            const interestFilter = document.getElementById('interest-filter');
            const grid = document.getElementById('date-ideas-grid');
            const resultsCount = document.getElementById('results-count');
            const modal = document.getElementById('modal');
            const closeModal = document.getElementById('close-modal');
            const tabs = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            const countryGuidesContent = document.getElementById('country-guides-content');
            const gamingConsole = document.getElementById('gaming-console');
            const mug = document.getElementById('mug');
            const recommendedBtn = document.getElementById('recommended-btn');
            const resetFiltersBtn = document.getElementById('reset-filters-btn');
            const countrySearch = document.getElementById('country-search');
            const passwordScreen = document.getElementById('password-screen');
            const passwordForm = document.getElementById('password-form');
            const passwordInput = document.getElementById('password-input');
            const entryScreen = document.getElementById('entry-screen');
            const animText = document.getElementById('anim-text');
            const animIcons = [document.getElementById('anim-icon-1'), document.getElementById('anim-icon-2'), document.getElementById('anim-icon-3'), document.getElementById('anim-icon-4')];
            const passwordBox = document.getElementById('password-box');

            let currentFilters = {
                country: 'All',
                interests: []
            };
            const userInterests = ['Anime', 'Manga', 'Video Games', 'History', 'Sci-fi', 'Space', 'Dragons', 'Cats', 'Foxes', 'Cute Animals', 'Cold', 'Board Games', 'Library Dates', 'Penguins', 'Picnics'];

            const animationSteps = [
                { text: "Thinking about our next adventure...", icons: ["🌍"] },
                { text: "Maybe somewhere with cute animals...", icons: ["🦊", "🐱", "🐧"] },
                { text: "And lots of games to play...", icons: ["🎮", "🎲"] },
                { text: "And of course, yummy food!", icons: ["🧺", "🥐", "☕"] },
                { text: "Okay, I've got some ideas!", icons: ["💖"] },
            ];

            let animStep = 0;
            function runAnimation() {
                if (animStep >= animationSteps.length) {
                    passwordBox.classList.add('visible');
                    passwordInput.focus();
                    return;
                }

                const step = animationSteps[animStep];
                animText.textContent = step.text;
                animText.classList.add('visible');
                
                animIcons.forEach((icon, i) => {
                    if (step.icons[i]) {
                        icon.textContent = step.icons[i];
                        setTimeout(() => icon.classList.add('visible'), (i + 1) * 200);
                    }
                });

                setTimeout(() => {
                    animText.classList.remove('visible');
                    animIcons.forEach(icon => icon.classList.remove('visible'));
                    animStep++;
                    setTimeout(runAnimation, 500);
                }, 2500);
            }
            
            runAnimation();

            passwordForm.addEventListener('submit', (e) => {
                e.preventDefault();
                if (passwordInput.value === 'FG£%GJ03493FJ£JF___£F£F(2') {
                    entryScreen.classList.add('hidden');
                    appContent.classList.add('unlocked');
                } else {
                    passwordInput.classList.add('error');
                    setTimeout(() => {
                        passwordInput.classList.remove('error');
                    }, 500);
                    passwordInput.value = '';
                }
            });

            function setupCountryGuides() {
                let html = '';
                for (const [country, guide] of Object.entries(countryGuides)) {
                    html += `
                        <div class="p-2 border-b last:border-b-0">
                            <h4 class="font-bold text-lg handwriting text-gray-700">${country}</h4>
                            <p class="mt-1"><strong class="text-pink-400">Best Time to Visit:</strong> ${guide.bestTime}</p>
                            <p class="mt-1"><strong class="text-pink-400">Our Vibe:</strong> ${guide.vibe}</p>
                            <p class="mt-1"><strong class="text-pink-400">LGBTQ+ Friendliness:</strong> ${guide.lgbtq}</p>
                            <p class="mt-1"><strong class="text-pink-400">Cute Souvenir Idea:</strong> ${guide.souvenir}</p>
                            <p class="mt-1"><strong class="text-pink-400">Language Corner:</strong> Hello: <span class="font-semibold">${guide.language.hello}</span> | Thank You: <span class="font-semibold">${guide.language.thankYou}</span> | Cute: <span class="font-semibold">${guide.language.cute}</span></p>
                        </div>
                    `;
                }
                countryGuidesContent.innerHTML = html;
            }

            function setupInterests() {
                const allInterests = [...new Set(dateIdeas.flatMap(idea => idea.interests))].sort();
                allInterests.push('Picnics');
                [...new Set(allInterests)].forEach(interest => {
                    const id = `interest-${interest.replace(/\s+/g, '-')}`;
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = id;
                    checkbox.value = interest;
                    checkbox.className = 'sr-only interest-checkbox';
                    checkbox.addEventListener('change', handleFilterChange);
                    
                    const label = document.createElement('label');
                    label.htmlFor = id;
                    label.textContent = interest;
                    label.className = 'interest-label cursor-pointer px-3 py-1 border border-gray-300 rounded-full bg-white hover:bg-gray-100';
                    
                    interestFilter.appendChild(checkbox);
                    interestFilter.appendChild(label);
                });
            }

            function renderCards() {
                grid.innerHTML = '';
                const filteredIdeas = dateIdeas.filter(idea => {
                    const countryMatch = currentFilters.country === 'All' || idea.country.toLowerCase() === currentFilters.country.toLowerCase();
                    const interestMatch = currentFilters.interests.length === 0 || currentFilters.interests.every(interest => idea.interests.includes(interest) || (interest === 'Picnics' && (idea.interests.includes('Parks') || idea.interests.includes('Seaside'))));
                    return countryMatch && interestMatch;
                });

                resultsCount.textContent = `I've found ${filteredIdeas.length} plans for us!`;

                if (filteredIdeas.length === 0) {
                    grid.innerHTML = `<p class="text-center text-gray-500 col-span-full handwriting text-lg">Hmm, none of my plans match... Let's try different filters!</p>`;
                    return;
                }

                filteredIdeas.forEach((idea, index) => {
                    const card = document.createElement('div');
                    card.className = 'diary-entry flex gap-4 items-start cursor-pointer';
                    card.dataset.id = idea.id;
                    card.style.animationDelay = `${index * 50}ms`;
                    
                    const topPickStar = idea.topPick ? `<span class="text-yellow-400 text-2xl absolute top-2 right-3" title="This one is a Top Pick for us!">⭐</span>` : '';

                    card.innerHTML = `
                        <div class="polaroid flex-shrink-0">
                            <div class="polaroid-image">
                                <span>${idea.emoji}</span>
                            </div>
                            <p class="polaroid-caption handwriting">${idea.country}</p>
                        </div>
                        <div>
                             <h3 class="font-bold text-xl handwriting text-gray-800">${idea.title}</h3>
                             <p class="text-sm text-gray-500">${idea.vibe}</p>
                        </div>
                        ${topPickStar}
                    `;
                    grid.appendChild(card);
                });
            }

            function syncFilters() {
                const interestCheckboxes = interestFilter.querySelectorAll('input[type="checkbox"]');
                interestCheckboxes.forEach(checkbox => {
                    checkbox.checked = currentFilters.interests.includes(checkbox.value);
                });
                countrySearch.value = currentFilters.country === 'All' ? '' : currentFilters.country;
            }

            function handleFilterChange() {
                currentFilters.interests = Array.from(interestFilter.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value);
                syncFilters();
                renderCards();
            }
            
            function showModal(ideaId) {
                const idea = dateIdeas.find(i => i.id == ideaId);
                if (!idea) return;

                const modalTitle = document.getElementById('modal-title');
                const modalVibe = document.getElementById('modal-vibe');
                const modalExperience = document.getElementById('modal-experience');
                const modalTip = document.getElementById('modal-tip');
                
                if (modalTitle) modalTitle.textContent = `${idea.emoji} ${idea.title}`;
                if (modalVibe) modalVibe.textContent = idea.vibe;
                if (modalExperience) modalExperience.textContent = idea.experience;
                if (modalTip) modalTip.textContent = idea.tip;
                
                if (modal) modal.classList.remove('hidden');
            }

            function hideModal() {
                if (modal) modal.classList.add('hidden');
            }

            recommendedBtn.addEventListener('click', () => {
                currentFilters.interests = [...userInterests];
                currentFilters.country = 'All';
                handleFilterChange();
            });

            resetFiltersBtn.addEventListener('click', () => {
                currentFilters.interests = [];
                currentFilters.country = 'All';
                handleFilterChange();
            });

            gamingConsole.addEventListener('click', () => {
                currentFilters.interests = ['Video Games', 'Board Games', 'Anime', 'Manga', 'Sci-fi'];
                currentFilters.country = 'All';
                handleFilterChange();
            });

            mug.addEventListener('click', () => {
                currentFilters.interests = ['Cafes', 'Picnics', 'Meals', 'Library Dates'];
                currentFilters.country = 'All';
                handleFilterChange();
            });
            
            countrySearch.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const foundCountry = Object.keys(countryGuides).find(c => c.toLowerCase().startsWith(searchTerm));
                if (foundCountry) {
                    currentFilters.country = foundCountry;
                } else if (searchTerm === '') {
                    currentFilters.country = 'All';
                }
                handleFilterChange();
            });

            grid.addEventListener('click', (e) => {
                const card = e.target.closest('.diary-entry');
                if (card) showModal(card.dataset.id);
            });
            
            if(closeModal) closeModal.addEventListener('click', hideModal);
            if(modal) modal.addEventListener('click', (e) => {
                if (e.target === modal) hideModal();
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') hideModal();
            });

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    tabContents.forEach(content => {
                        content.classList.toggle('active', content.id === tab.dataset.tab);
                    });
                });
            });

            // Create falling leaves
            for(let i=0; i<15; i++) {
                const leaf = document.createElement('div');
                leaf.className = 'falling-leaf';
                leaf.style.left = Math.random() * 100 + 'vw';
                leaf.style.animationDuration = Math.random() * 5 + 10 + 's';
                leaf.style.animationDelay = Math.random() * 10 + 's';
                leaf.style.transform = `scale(${Math.random() * 0.5 + 0.5})`;
                if(i % 2 === 0) {
                    leaf.style.backgroundColor = '#ffc0cb'; // pink
                } else {
                    leaf.style.backgroundColor = '#b0e0e6'; // powderblue
                }
                document.body.prepend(leaf);
            }

            setupCountryGuides();
            setupInterests();
            handleFilterChange();
        });
    </script>
</body>
</html>
